// PKGPATH: gno.land/r/crossrealm_test
package crossrealm_test

import (
	"std"

	"gno.land/r/demo/tests"
	"gno.land/r/demo/tests/unsaferealm"
)

func main() {
	addr := std.GetCaller()
	println("balance:", unsaferealm.BalanceOf(addr))

	// Test to exploit from the Do function steal money from unsaferealm treasury
	unsaferealm.Do(func() {
		println("transfering", std.GetCaller())
		unsaferealm.Transfer(addr, 100000)
	})

	println("balance:", unsaferealm.BalanceOf(addr))
}

// Output:
// N/A
